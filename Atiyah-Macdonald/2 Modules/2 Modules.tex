\documentclass[12pt,letterpaper]{article}
\usepackage{geometry}
\geometry{letterpaper}
\usepackage{amsmath,amssymb,amsthm,mathrsfs}
\usepackage{mathtools}
\usepackage{ifpdf}
  \ifpdf
    \setlength{\pdfpagewidth}{8.5in}
    \setlength{\pdfpageheight}{11in}
  \else
\fi
\usepackage{hyperref}

\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{decorations.markings}
\tikzset{
  open/.style = {decoration = {markings, mark = at position 0.5 with { \node[transform shape] {\tikz\draw[fill=white] (0,0) circle (.3ex);}; } }, postaction = {decorate} },
  closed/.style = {decoration = {markings, mark = at position 0.5 with { \node[transform shape, xscale = .8, yscale=.4] {\upshape{/}}; } }, postaction = {decorate} },
  imm/.style = {decoration = {markings, mark = at position 0.3 with { \node[transform shape, xscale = .8, yscale=.4] {\upshape{/}}; }, mark = at position 0.6 with { \node[transform shape] {\tikz\draw[fill=white] (0,0) circle (.3ex);}; } }, postaction = {decorate} }
}

\usepackage{braket}

\usepackage[utf8]{inputenc}
\usepackage{csquotes}
\usepackage[american]{babel}
\usepackage[style=alphabetic,firstinits=true,backend=biber,texencoding=utf8,bibencoding=utf8]{biblatex}
\bibliography{../../References}
\AtEveryBibitem{\clearfield{url}}
\AtEveryBibitem{\clearfield{doi}}
\AtEveryBibitem{\clearfield{issn}}
\AtEveryBibitem{\clearfield{isbn}}
\renewbibmacro{in:}{}
\DeclareFieldFormat{postnote}{#1}
\DeclareFieldFormat{multipostnote}{#1}

\renewcommand{\theenumi}{$(\alph{enumi})$}
\renewcommand{\labelenumi}{\theenumi}

\newcounter{enumacounter}
\newenvironment{enuma}
{\begin{list}{$(\alph{enumacounter})$}{\usecounter{enumacounter} \parsep=0em \itemsep=0em \leftmargin=2.75em \labelwidth=1.5em \topsep=0em}}
{\end{list}}
\newcounter{enumicounter}
\newenvironment{enumi}
{\begin{list}{$\roman{enumicounter})$}{\usecounter{enumicounter} \parsep=0em \itemsep=0em \leftmargin=2.25em \labelwidth=1.5em \topsep=0em}}
{\end{list}}
\newcounter{enumnumcounter}
\newenvironment{enumnum}
{\begin{list}{$(\arabic{enumnumcounter})$}{\usecounter{enumnumcounter} \parsep=0em \itemsep=0em \leftmargin=2.25em \labelwidth=1.5em \topsep=0em}}
{\end{list}}
\newtheorem*{theorem}{Theorem}
\newtheorem*{universalproperty}{Universal Property}
\newtheorem{problem}{Exercise}[section]
\newtheorem{subproblem}{Problem}[problem]
\newtheorem{lemma}{Lemma}%[section]
\newtheorem{proposition}{Proposition}
\newtheorem{property}{Property}[problem]
\newtheorem*{lemma*}{Lemma}
\newtheorem*{claim}{Claim}
\theoremstyle{definition}
\newtheorem*{definition}{Definition}
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

\numberwithin{figure}{problem}
\numberwithin{equation}{section}

\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Ass}{Ass}
\DeclareMathOperator{\Supp}{Supp}
\DeclareMathOperator{\WeakAss}{\widetilde{Ass}}
\let\Im\relax
\DeclareMathOperator{\Im}{Im}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\SPEC}{\mathbf{Spec}}
\DeclareMathOperator{\Sp}{sp}
\DeclareMathOperator{\Max}{Max}
\DeclareMathOperator{\maxSpec}{maxSpec}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Soc}{Soc}
\DeclareMathOperator{\Ht}{ht}
\DeclareMathOperator{\A}{\mathcal{A}}
\DeclareMathOperator{\V}{\mathbf{V}}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\stimes}{\text{\footnotesize\textcircled{s}}}
\DeclareMathOperator{\End}{End}
\let\ker\relax
\DeclareMathOperator{\ker}{Ker}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Coker}{Coker}
\DeclareMathOperator{\LCM}{LCM}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\dv}{div}
\DeclareMathOperator{\Gr}{Gr}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\trd}{tr.d.}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\lt}{lt}
\DeclareMathOperator{\lc}{lc}
\newcommand{\GR}{\mathbb{G}\mathrm{r}}
\newcommand{\gR}{\mathrm{Gr}}
\newcommand{\EE}{\mathscr{E}}
\newcommand{\FF}{\mathscr{F}}
\newcommand{\GG}{\mathscr{G}}
\newcommand{\HH}{\mathscr{H}}
\newcommand{\II}{\mathscr{I}}
\newcommand{\LL}{\mathscr{L}}
\newcommand{\MM}{\mathscr{M}}
\newcommand{\OO}{\mathcal{O}}
\newcommand{\Ss}{\mathscr{S}}
\newcommand{\Af}{\mathfrak{A}}
\newcommand{\Aa}{\mathscr{A}}
\newcommand{\PP}{\mathcal{P}}
\newcommand{\red}{\mathrm{red}}
\newcommand{\Sh}{\mathfrak{Sh}}
\newcommand{\Psh}{\mathfrak{Psh}}
\newcommand{\LRS}{\mathsf{LRS}}
\newcommand{\Sch}{\mathfrak{Sch}}
\newcommand{\Var}{\mathfrak{Var}}
\newcommand{\Rings}{\mathfrak{Rings}}
\DeclareMathOperator{\In}{in}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Spe}{Sp\acute{e}}
\DeclareMathOperator{\HHom}{\mathscr{H}\!\mathit{om}}
\newcommand{\isoto}{\overset{\sim}{\to}}
\newcommand{\isolongto}{\overset{\sim}{\longrightarrow}}
\newcommand{\Mod}{\mathsf{mod}\mathchar`-}
\newcommand{\MOD}{\mathsf{Mod}\mathchar`-}
\newcommand{\gr}{\mathsf{gr}\mathchar`-}
\newcommand{\qgr}{\mathsf{qgr}\mathchar`-}
\newcommand{\uqgr}{\underline{\mathsf{qgr}}\mathchar`-}
\newcommand{\qcoh}{\mathsf{qcoh}\mathchar`-}
\newcommand{\Alg}{\mathsf{Alg}\mathchar`-}
\newcommand{\coh}{\mathsf{coh}\mathchar`-}
\newcommand{\vect}{\mathsf{vect}\mathchar`-}
\newcommand{\imm}[1][imm]{\hspace{0.75ex}\raisebox{0.58ex}{%
\begin{tikzpicture}[commutative diagrams/every diagram]
\draw[commutative diagrams/.cd, every arrow, every label,hook,{#1}] (0,0ex) -- (2.25ex,0ex);
\end{tikzpicture}}\hspace{0.75ex}}
\newcommand{\dashto}[2]{\smash{\hspace{-0.7em}\begin{tikzcd}[column sep=small,ampersand replacement=\&] {#1} \rar[dashed] \& {#2} \end{tikzcd}\hspace{-0.7em}}}

%\usepackage{todonotes}
%\usepackage[notref,notcite]{showkeys}

\title{Atiyah-Macdonald Ch.~2 Modules}
\author{Takumi Murayama}

\begin{document}
\maketitle
\setcounter{section}{2}
\begin{problem}
  Show that $(\mathbb{Z}/m\mathbb{Z}) \otimes_{\mathbb{Z}} (\mathbb{Z}/n\mathbb{Z}) = 0$ if $m,n$ are coprime.
\end{problem}
%\begin{remark}
%  We show more generally that $(\mathbb{Z}/m\mathbb{Z}) \otimes_{\mathbb{Z}} (\mathbb{Z}/n\mathbb{Z}) \cong \mathbb{Z}/\gcd(m,n)\mathbb{Z}$.
%\end{remark}
%\begin{proof}
%  First let $g \colon (\mathbb{Z}/m\mathbb{Z}) \times (\mathbb{Z}/n\mathbb{Z}) \to \mathbb{Z}/\gcd(m,n)\mathbb{Z}$ be the map $(x,z) \mapsto xz$. This is bilinear since $g(ax+y,z) = (ax+y)z = axz + yz = ag(x,z) + g(y,z)$, and similarly $g(x,ay+z) = x(ay+z) = axy + xz = ag(x,y) + g(x,z)$ for any $a \in \mathbb{Z}$. It then suffices by Prop.~2.12 that if in the diagram
%  \begin{equation*}
%    \begin{tikzcd}
%      (\mathbb{Z}/m\mathbb{Z}) \times (\mathbb{Z}/n\mathbb{Z})\rar{g}\arrow{dr}[swap]{f} & \mathbb{Z}/\gcd(m,n)\mathbb{Z}\dar[dashed]{f'}\\
%      & P
%    \end{tikzcd}
%  \end{equation*}
%  $f$ is bilinear, then $f'$ exists uniquely such that the diagram commutes.
%  \par So let $f'$ be defined as $x \mapsto f(x',x'')$, where $x',x''$ are lifts of $x$ to $\mathbb{Z}/m\mathbb{Z},\mathbb{Z}/n\mathbb{Z}$, respectively.
%
%  It suffices by Prop.~2.12 to show $\mathbb{Z}/\gcd(m,n)\mathbb{Z}$ satisfies the universal property for $(\mathbb{Z}/m\mathbb{Z}) \otimes_{\mathbb{Z}} (\mathbb{Z}/n\mathbb{Z})$. So let  It suffices to show that if, in the diagram
%  for any bilinear map $f \colon (\mathbb{Z}/m\mathbb{Z}) \times (\mathbb{Z}/n\mathbb{Z}) \to P$, 
%\end{proof}
\begin{proof}
  If $m,n$ are coprime, there exist $r,s$ such that $rm + sn = 1$. So, for any pure tensor $a \otimes b$, $a \otimes b = (rm + sn)(a \otimes b) = r(ma \otimes b) + s(a \otimes nb) = 0$, hence $(\mathbb{Z}/m\mathbb{Z}) \otimes_{\mathbb{Z}} (\mathbb{Z}/n\mathbb{Z}) = 0$ since every generator is $0$.
\end{proof}

\begin{problem}\label{exc:2.2}
  Let $A$ be a ring, $\mathfrak{a}$ an ideal, $M$ an $A$-module. Show that $(A/\mathfrak{a}) \otimes_A M$ is isomorphic to $M/\mathfrak{a}M$.
\end{problem}
\begin{proof}
  Consider the exact sequence $0 \to \mathfrak{a} \xrightarrow{h} A \xrightarrow{\pi} A/\mathfrak{a} \to 0$. Tensoring with $M$ over $A$ yields the right exact sequence
  \begin{equation*}
    \begin{tikzcd}
      \mathfrak{a} \otimes M \rar{h \otimes 1} & A \otimes M \rar{\pi \otimes 1} & (A/\mathfrak{a}) \otimes M \rar & 0
    \end{tikzcd}
  \end{equation*}
  by Prop.~$2.18$. Prop.~$2.14$ gives the unique isomorphism $f\colon A \otimes M \to M$, and so letting $g\coloneqq (\pi \otimes 1) \circ f^{-1} \colon M \to A \otimes M \to (A/\mathfrak{a}) \otimes M$, we claim the sequence
  \begin{equation*}
    \begin{tikzcd}
      0 \rar & \mathfrak{a}M \rar & M \rar{g} & (A/\mathfrak{a}) \otimes M \rar & 0
    \end{tikzcd}
  \end{equation*}
  is exact. $\Im(g) = \Im(\pi \otimes 1) = (A/\mathfrak{a}) \otimes M$, and $\Ker(g) = f(\Ker(\pi \otimes 1)) = f(\Im(h \otimes 1)) = \mathfrak{a}M$. Thus, $(A/\mathfrak{a}) \otimes M$ is isomorphic to $M/\mathfrak{a}M$.
\end{proof}

\begin{problem}
  Let $A$ be a local ring, $M$ and $N$ finitely generated $A$-modules. Prove that if $M \otimes N = 0$, then $M = 0$ or $N = 0$.
\end{problem}
\begin{proof}
  Let $\mathfrak{m} \subseteq A$ be the maximal ideal, and $k = A/\mathfrak{m}$ the residue field. Then, $M_k = k \otimes_A M \cong M/\mathfrak{m}M$ by Exercise \ref{exc:2.2}. By Nakayama's lemma (Prop.~2.6), $M_k = 0$ implies $M = 0$. But $M \otimes_A N = 0$ implies $(M \otimes_A N)_k = 0$, so $M_k \otimes_k N_k = M \otimes_A k \otimes_k k \otimes_A N = 0$. Thus, $M_k = 0$ or $N_k = 0$ since $M_k,N_k$ are both vector spaces over $k$, and so by Nakayama's lemma again, $M = 0$ or $N = 0$.
\end{proof}

\begin{problem}\label{exc:2.4}
  Let $M_i$ $(i \in I)$ be any family of $A$-modules, and let $M$ be their direct sum. Prove that $M$ is flat $\Leftrightarrow$ each $M_i$ is flat.
\end{problem}
\begin{lemma}\label{up:dirsum}
  Let $M = \bigoplus_{i \in I} M_i$ be the direct sum and $j_i\colon M_i \to M$ be the canonical inclusion maps. $M$ satisfies the following universal property:
  \par If $\{f_i \colon M_i \to P\}_{i \in I}$ is a family of $A$-module homomorphisms, then there exists a unique $A$-module homomorphism $f\colon M \to P$ such that $f \circ j_i = f_i$ for all $i$.
\end{lemma}
\begin{proof}[Proof of Lemma $\ref{up:dirsum}$]
  Define $f \colon M \to P$ to be the map $(m_i)_{i \in I} \mapsto \sum_{i \in I} f_i(m_i)$; this is an $A$-module homomorphism since each $f_i$ is. $f \circ j_i = f_i$ by definition, and $f$ is unique since the $j_i(m_i)$ for $m_i \in M_i$ generate $M$, hence the $f_i$ uniquely determine $f$ by its behavior on generators.
\end{proof}
\begin{lemma}\label{l2.4}
  Tensor products commute with direct sums, i.e., for any $A$-module $N$, $N \otimes_A \left(\bigoplus_{i \in I} M_i\right) \cong \bigoplus_{i \in I}(N \otimes_A M_i)$.
\end{lemma}
\begin{proof}[Proof of Lemma $\ref{l2.4}$]
  Denoting $M = \bigoplus_{i \in I}M_i$, define the map
  \begin{equation*}
    g \colon N \times M \to \bigoplus_{i \in I}(N \otimes M_i) \qquad (n,(m_i)_{i\in I}) \mapsto (n \otimes m_i)_{i \in I}.
  \end{equation*}
  This is $A$-bilinear, for
  \begin{align*}
    g(ax+y,(m_i)_{i\in I}) &= ((ax+y) \otimes m_i)_{i \in I} = a(x \otimes m_i)_{i \in I} + (y \otimes m_i)_{i \in I}\\
    &= ag(x,(m_i)_{i\in I}) + g(y,(m_i)_{i\in I})\\
    g(n,a(x_i)_{i\in I}+(y_i)_{i\in I}) &= (n \otimes ax_i+y_i)_{i\in I} = a(n \otimes x_i)_{i \in I} + (n \otimes y_i)_{i \in I}\\
    &= ag(n,(x_i)_{i\in I}) = g(n,(y_i)_{i\in I})
  \end{align*}
  It then suffices by Prop.~2.12 to show that $\bigoplus_{i \in I}(N \otimes M_i)$ satisfies the universal property for $N \otimes M$, i.e., that for any $A$-bilinear map $f\colon N \times M \to P$, there exists a unique homomorphism $f'\colon \bigoplus_{i \in I}(N \otimes M_i) \to P$ making the diagram below commute:
  \begin{equation*}
    \begin{tikzcd}
      N \times M \rar{g}\arrow{dr}[swap]{f} & \bigoplus_{i \in I}(N \otimes M_i)\dar[dashed]{f'}\\
      & P
    \end{tikzcd}
  \end{equation*}
  Now we know that for any $m_i \in M_i$, commutativity requires that for each direct summand $N \otimes M_i$, $n \otimes m_i \mapsto f(n,j_i(m_i))$, where $j_i \colon M_i \to M$ is the canonical inclusion. But by Lemma \ref{up:dirsum}, this induces a unique $A$-module homomorphism $f' \colon \bigoplus_{i \in I}(N \otimes M_i) \to P$, and so we are done.
\end{proof}
\begin{proof}[Main Proof]
  Let $N' \to N$ be injective. By Prop.~$2.19$, it suffices to show $f \otimes 1_M\colon N' \otimes M \to N \otimes M$ is injective if and only if $f\colon N' \otimes M_i \to N \otimes M_i$ is injective for each $i$. But by Lemma \ref{l2.4}, we see that we have the commutative diagram
  \begin{equation*}
    \begin{tikzcd}
      N' \otimes M \rar{f \otimes 1_M} & N \otimes M \arrow{d}{\cong}\\
      \bigoplus_{i \in I}(N' \otimes M_i) \arrow{r}{g} \arrow[leftarrow]{u}{\cong} & \bigoplus_{i \in I}(N \otimes M_i)
    \end{tikzcd}
  \end{equation*}
  where $g$ is the map induced by Lemma \ref{up:dirsum} by the maps
  \begin{equation*}
    \begin{tikzcd}[column sep=large]
      N' \otimes M_i \rar[hook]{1_{N'} \otimes j_i} & N' \otimes M \rar{f \otimes 1_M} & N \otimes M \rar{\sim} & \bigoplus_{i \in I}(N \otimes M_i).
    \end{tikzcd}
  \end{equation*}
  Note that by uniqueness in Lemma \ref{up:dirsum}, $g = \bigoplus_{i \in I} (f \otimes 1_{M_i})$ as well, hence by the diagram above, $f \otimes 1_M$ is injective if and only if $g$ is injective, which holds if and only if $f \otimes 1_{M_i}$ is injective for all $i \in I$.
\end{proof}

\begin{problem}\label{exc:2.5}
  Let $A[x]$ be the ring of polynomials in one indeterminate over a ring $A$. Prove that $A[x]$ is a flat $A$-algebra.
\end{problem}
\begin{proof}
  As an $A$-module, $A[x] \cong A \oplus xA \oplus x^2A \oplus \cdots \cong A \oplus A \oplus A \oplus \cdots$. Since tensoring by $A$ is trivial by Prop.~$2.14iv)$, $A$ is flat, so $A[x]$ is flat by Exercise \ref{exc:2.4}.
\end{proof}

\begin{problem}\label{exc:2.6}
  For any $A$-module, let $M[x]$ denote the set of all polynomials in $x$ with coefficients in $M$, that is to say expressions of the form
  \begin{equation*}
    m_0 + m_1x + \cdots + m_rx^r \qquad (m_i \in M).
  \end{equation*}
  Defining the product of an element of $A[x]$ and an element of $M[x]$ in the obvious way, show that $M[x]$ is an $A[x]$-module.
  \par Show that $M[x] \cong A[x] \otimes_A M$.
\end{problem}
\begin{proof}
  $M[x]$ is clearly an abelian group, since addition is defined term-wise making $M \cong M \oplus xM \oplus x^2M \oplus \cdots \cong M \oplus M \oplus M \oplus \cdots$ as an abelian group.
  \par We check that it is an $A[x]$-module. Define
  \begin{equation*}
    \left( \sum_i a_ix^i \right) \left( \sum_j m_jx^j \right) \coloneqq \sum_{i + j = k} a_im_jx^k. 
  \end{equation*}
  We check this turns $M[x]$ into an $A[x]$-module. $1 \in A$ clearly acts as the identity, so we check the other axioms:
  \begin{align*}
    &\left( \sum_i a_ix^i \right) \left( \sum_j m_jx^j + \sum_j n_jx^j \right) = \left( \sum_i a_ix^i \right) \left( \sum_j (m_j+n_j)x^j \right)\\
    &\qquad\qquad= \sum_k \sum_{i + j = k} a_i(m_j+n_j)x^k= \sum_k \sum_{i + j = k} a_im_jx^k + \sum_k \sum_{i + j = k} a_in_jx^k\\
    &\qquad\qquad= \left( \sum_i a_ix^i \right) \left( \sum_j m_jx^j \right) + \left( \sum_i a_ix^i \right) \left( \sum_j n_jx^j \right)\\
    &\left( \sum_i a_ix^i + \sum_i b_ix^i \right)\left( \sum_j m_jx^j \right) = \left( \sum_i (a_i+b_i)x^i \right)\left( \sum_j m_jx^j \right)\\
    &\qquad\qquad= \sum_k \sum_{i+j=k} (a_i+b_i)m_jx^k= \sum_k \sum_{i + j = k} a_im_jx^k + \sum_k \sum_{i + j = k} b_im_jx^k\\
    &\qquad\qquad= \left( \sum_i a_ix^i \right)\left( \sum_j m_jx^j \right) + \left( \sum_i b_ix^i \right)\left( \sum_j m_jx^j \right)\\
    &\left(\left( \sum_i a_ix^i\right)\left(\sum_j b_jx^j \right)\right)\left( \sum_k m_kx^k \right) = \left( \sum_\ell \sum_{i+j=\ell} a_ib_jx^\ell \right)\left( \sum_k m_kx^k \right)\\
    &\qquad\qquad= \sum_p \sum_\ell \sum_{i+j=\ell} \sum_{\ell+k=p} a_ib_jm_kx^p = \sum_p \sum_{i+j+k=p} a_ib_jm_kx^p\\
    &\qquad\qquad= \left( \sum_i a_ix^i \right) \left( \sum_\ell \sum_{j+k=\ell} b_jm_kx^\ell \right)\\
    &\qquad\qquad= \left( \sum_i a_ix^i \right) \left( \left(\sum_j b_jx^j \right)\left( \sum_k m_kx^k \right) \right)
  \end{align*}
  \par We now show $M[x] \cong A[x] \otimes_A M$. By Exercise \ref{exc:2.5}, we have $A[x] \cong A \oplus xA \oplus x^2A \oplus \cdots$, hence
  \begin{equation*}
    A[x] \otimes_A M \cong (A \oplus xA \oplus x^2A \oplus \cdots) \otimes_A M \cong M \oplus xM \oplus x^2M \oplus \cdots = M[x]
  \end{equation*}
  as $A$-modules, using Lemma \ref{l2.4}. Note that this isomorphism $\varphi$ is the map 
  \begin{equation*}
    \left(\sum a_ix^i \otimes m\right) \mapsto \sum (a_im)x^i
  \end{equation*}
  We need to check that this $A$-module isomorphism preserves the $A[x]$-module structure. Since $\varphi$ is $A$-linear, it suffices to check it respects multiplication by $A[x]$ on pure tensors:
  \begin{align*}
    \varphi\left(\left(\sum a_ix^i\right)\left(\sum b_jx^j \otimes m\right)\right) &= \varphi\left(\left( \sum_{i+j=k} a_ib_jx^k \right) \otimes m\right)\\
    &= \sum_{i+j=k} (a_ib_jm)x^k = \left(\sum_i a_ix^i\right)\left(\sum b_jmx^j\right)\\
    &= \left(\sum_i a_ix^i\right) \varphi\left( \sum b_jx^j \otimes m \right).
  \end{align*}
  Since $\varphi$ is an isomorphism of $A$-modules, it is bijective, and so it is a bijective $A[x]$-module homomorphism as well, hence an isomorphism of $A[x]$-modules.
  %Define the map
  %\begin{equation*}
  %  g\colon A[x] \times M \to M[x] \qquad \left( \sum_i a_ix^i,m \right) \mapsto \sum_i a_imx^i
  %\end{equation*}
  %This is clearly $A$-bilinear by definition. It suffices by Prop.~2.12 to show that $M[x]$ satisfies the universal property for $A[x] \otimes_A M$, i.e., that for any $A$-bilinear map $f\colon A[x] \times M \to P$, there exists a unique homomorphism $f'\colon M[x] \to P$ making the diagram below commute:
  %\begin{equation*}
  %  \begin{tikzcd}
  %    A[x] \times M \rar{g}\arrow{dr}[swap]{f} & M[x]\dar[dashed]{f'}\\
  %    & P
  %  \end{tikzcd}
  %\end{equation*}
  %So, define the $A$-module homomorphism
  %\begin{equation*}
  %  f'\colon M[x] \to P \qquad \sum_i m_ix^i \mapsto \sum_i f(x^i,m_i).
  %\end{equation*}
  %This makes the diagram commute since
  %\begin{align*}
  %  (f' \circ g)\left( \sum_i a_ix^i,m \right) &= f'\left( \sum_i a_imx^i \right) = \sum_i f(x^i,a_im)\\
  %  &= \sum_i f(a_ix^i,m) = f\left( \sum_i a_ix^i,m \right).
  %\end{align*}
  %Moreover, $f'$ is unique since the $mx^i$ generate $M[x]$, and the action of $f'$ on these $mx^i$ is uniquely determined by $f$. Thus, $M[x] \cong A[x] \otimes_A M$.
\end{proof}

\begin{problem}
  Let $\mathfrak{p}$ be a prime ideal in $A$. Show that $\mathfrak{p}[x]$ is a prime ideal in $A[x]$. If $\mathfrak{m}$ is a maximal ideal in $A$, is $\mathfrak{m}[x]$ a maximal ideal in $A[x]$?
\end{problem}
\begin{proof}
  Let $\pi\colon A[x] \to (A/\mathfrak{p})[x]$ be the ring homomorphism defined by reducing coefficients $\bmod \mathfrak{p}$. This is clearly a surjective ring homomorphism, with kernel $\mathfrak{p}[x]$, hence $A[x]/\mathfrak{p}[x] \cong (A/\mathfrak{p})[x]$ as rings. Since $A/\mathfrak{p}$ is a domain, $(A/\mathfrak{p})[x]$ is a domain, hence $\mathfrak{p}[x] \subset A[x]$ is a prime ideal.
  \par Finally, $\mathfrak{m}[x]$ is not a maximal ideal in $A[x]$, for by the above, $A[x]/\mathfrak{m}[x] \cong (A/\mathfrak{m})[x]$, and $A/\mathfrak{m}$ is a field $k$, but $A[x]/\mathfrak{m}[x] \cong k[x]$ is not a field so $\mathfrak{m}[x] \subset A[x]$ is not a maximal ideal.
\end{proof}

\begin{problem}\mbox{}
  \begin{enumi}
    \item If $M$ and $N$ are flat $A$-modules, then so is $M \otimes_A N$.
    \item If $B$ is a flat $A$-algebra and $N$ is a flat $B$-module, then $N$ is flat as an $A$-module.
  \end{enumi}
\end{problem}
\begin{proof}[Proof of $i)$]
  Suppose $f \colon L' \to L$ is an injective $A$-module homomorphism. Then, since $M,N$ are flat, $f \otimes 1_M \colon L' \otimes M \to L \otimes M$ is injective, and so is $(f \otimes 1_M) \otimes 1_N \colon (L' \otimes M) \otimes N \to (L \otimes M) \otimes N$. By the associativity of the tensor product (Prop.~$2.4$), $f \otimes (1_M \otimes 1_N) \colon L' \otimes (M \otimes N) \to L \otimes (M \otimes N)$ is injective, and thus $M \otimes N$ is flat by Prop.~$2.19$.
\end{proof}
\begin{proof}[Proof of $ii)$]
  Suppose $f \colon L' \to L$ is an injective $A$-module homomorphism. Since $B$ is a flat $A$-algebra, $f \otimes_A 1_B \colon L' \otimes_A B \to L \otimes_A B$ is an injective $A$-module homomorphism. This is also an injective $B$-module homomorphism by using the $B$-module structure $b'(\ell \otimes b) = \ell \otimes (b'b)$ where $\ell \in L'$ or $L$. Since $N$ is a flat $B$-module, $(f \otimes_A 1_B) \otimes_B 1_N \colon (L' \otimes_A B) \otimes_B N \to (L \otimes_A B) \otimes_B N$ is injective. By Exercise $2.15$ in the text, we can associate these tensor products differently to get that $f \otimes_A (1_B \otimes_B 1_N) \colon L' \otimes_A (B \otimes_B N) \to L \otimes_A (B \otimes_B N)$ is injective. But by using the isomorphism $B \otimes_B N \simeq N$ in Prop.~$2.14$, we then have $f \otimes_A 1_N \colon L' \otimes_A N \to L \otimes_A N$ is injective, and so $N$ is flat by Prop.~$2.19$.
\end{proof}

\begin{problem}
  Let $0 \to M' \to M \to M'' \to 0$ be an exact sequence of $A$-modules. If $M'$ and $M''$ are finitely generated, then so is $M$.
\end{problem}
\begin{proof}
  Since $M',M''$ are finitely generated, by Prop.~2.3 we have the diagram
  \begin{equation*}
    \begin{tikzcd}
      0 \rar & A^m \rar\dar{\alpha} & A^{m} \oplus A^n \rar\dar[dashed]{\beta} & A^n \rar\dar{\gamma} & 0\\
      0 \rar & M' \rar{f} & M \rar{g} & M'' \rar & 0
    \end{tikzcd}
  \end{equation*}
  where $\alpha,\gamma$ are surjective, and each row is exact. Denote the generators of $A^{m} \oplus A^n$ as $x_1,\ldots,x_m,y_1,\ldots,y_n$; identifying $x_i,y_j$ with their preimages and images in $A^m,A^n$ respectively, define $\beta(x_i) = f(\alpha(x_i))$ and $\beta(y_j) = g(\beta(y_j))$. This makes the diagram commute, hence by the snake lemma (Prop.~2.10), we have that $\Coker \alpha \to \Coker \beta \to \Coker \gamma$ is exact. But $\Coker \alpha = \Coker \gamma = 0$, hence $\Coker \beta = 0$, and so $\beta$ is surjective, i.e., $M$ is finitely generated by Prop.~2.3.
  %Let $f\colon M' \to M$ and $g\colon M \to M''$ be our maps in the exact sequence.  Let $M',M''$ be generated by $\{x_i\}, \{z_i\}$ respectively. We see that $\Im(f)$ is generated by $\{f(x_i)\}$; since $g$ is surjective, we also see there are $\{y_i\}\subseteq M$ such that $g(y_i) = z_i$. By the splitting lemma, we then see $M \simeq \langle f(x_i) \rangle \oplus \langle y_i \rangle$, and so $M$ is finitely generated by $\{f(x_i)\} \cup \{y_i\}$.
  %  Let the submodule $N \subseteq M$ be that generated by the $\{y_i\}$, then $\mathrm{Im}(N) = M''$. Now let $y \in M'$; we see that then there exists $y' \in N$ such that $g(y) = g(y')$ by taking the inverse image of $\bar{y}$ under the quotient map. Thus, $y = y' + (y - y')$, and since $y-y' \in \ker(g) = \mathrm{Im}(f)$, we see that $M$ is generated by $\{f(x_i)\} \cup \{y_i\}$.
\end{proof}

\begin{problem}
  Let $A$ be a ring, $\mathfrak{a}$ an ideal contained in the Jacobson radical of $A$; let $M$ be an $A$-module and $N$ a finitely generated $A$-module, and let $u\colon M \to N$ be a homomorphism. If the induced homomorphism $M/\mathfrak{a}M \to N/\mathfrak{a}N$ is surjective, then $u$ is surjective.
\end{problem}
\begin{proof}
  Letting $L = \Coker(u)$, we have the right exact sequence $M \to N \to L \to 0$. Tensoring with $A/\mathfrak{a}$ gives the right exact sequence
  \begin{equation*}
    M/\mathfrak{a}M \overset{\bar{u}}{\longrightarrow} N/\mathfrak{a}N \overset{\bar{\pi}}{\longrightarrow} L/\mathfrak{a}L \longrightarrow 0,
  \end{equation*}
  where we use the isomorphisms $(A/\mathfrak{a}) \otimes_A M \cong M/\mathfrak{a}M$ and $(A/\mathfrak{a}) \otimes_A N \cong N/\mathfrak{a}N$ from Exercise \ref{exc:2.2}, where $\bar{u}$ is the induced map of $u$, and $\bar{\pi}$ of $\pi\colon N \to L$. By assumption, $\bar{u}$ is surjective, hence $L/\mathfrak{a}L = 0$. But by Nakayama's lemma (Prop.~2.6), we then get $L= \Coker(u) = 0$, and so $u$ is surjective as claimed.
\end{proof}

\begin{problem}
  Let $A$ be a ring $\ne 0$. Show that $A^m \cong A^n \Rightarrow m = n$. (Cf.~\href{AM 3 Rings and Modules of Fractions.pdf#exc:3.15}{Chapter $3$, Exercise $15$}.)
  \par If $\varphi\colon A^m \to A^n$ is surjective, then $m \ge n$.
  \par If $\varphi\colon A^m \to A^n$ is injective, is it always the case that $m \le n$?
\end{problem}
\begin{proof}
  Let $\mathfrak{m}$ be a maximal ideal of $A$ and let $\varphi\colon A^m \to A^n$ be an isomorphism. Then $1 \otimes \varphi\colon (A/\mathfrak{m}) \otimes_A A^m \to (A/\mathfrak{m}) \otimes_A A^n$ is an isomorphism between vector spaces of dimensions $m$ and $n$ over the field $k = A/\mathfrak{m}$, hence $m=n$.
  \par If $\varphi$ is merely surjective, then surjectivity of $1 \otimes \varphi$ follows by the right exactness of $(A/\mathfrak{m}) \otimes_A -$ (Prop.~2.18), hence $m \ge n$.
  \par Now suppose $\psi$ is injective, and suppose by way of contradiction that $m > n$. First identify $A^n$ with the submodule of $A^m$ generated by the first $n$ basis elements; $\psi$ then defines an injective endomorphism $\psi \colon A^m \overset{\varphi}{\hookrightarrow} A^n \hookrightarrow A^m$. By the Cayley-Hamilton theorem for modules (Prop.~2.4), $\psi$ satisfies an equation of the form
  \begin{equation*}
    c(\psi) = \psi^k + a_{1}\psi^{k-1} + \cdots + a_k = 0
  \end{equation*}
  for $a_i \in A$, and moreover there is such an equation with minimal degree $k$. Since $\psi$ is injective, this implies $a_k \ne 0$, for otherwise then $\psi \circ c(\psi) = 0$, hence by injectivity of $\psi$, $\psi^{k-1} + a_{1}\psi^{k-2} + \cdots + a_{k-1} = 0$, contradicting minimality. Now note that $\psi(0,0,\ldots,0,1)$ has last coordinate $0$ by construction of $\psi$, so $c(\psi)(0,0,\ldots,0,1)$ has last coordinate $a_{k-1}$, contradicting that $c(\psi) = 0$.\footnote{This proof is due to Balazs Strenner \cite{MO47846}.}
\end{proof}

\begin{problem}
  Let $M$ be a finitely generated $A$-module and $\varphi\colon M \to A^n$ a surjective homomorphism. Show that $\Ker(\varphi)$ is finitely generated.
\end{problem}
\begin{lemma}[Splitting lemma {\cite[2.10]{Rei95}}]\label{lem:splitting}
  Let $0 \to L \overset{\alpha}{\to} M \overset{\beta}{\to} N \to 0$ be a short exact sequence of $A$-modules. Then, the following are equivalent:
  \begin{enumi}
    \item there exists an isomorphism $M \cong L \oplus N$ under which $\alpha$ is given by $m \mapsto (m,0)$ and $\beta$ is by $(m,n) \mapsto n$;
    \item there exists a section of $\beta$, i.e., a map $s\colon N \to M$ such that $\beta \circ s = \id_N$;
    \item there exists a retraction of $\alpha$, i.e., a map $r\colon M \to L$ such that $r \circ \alpha = \id_L$.
  \end{enumi}
  If this happens the sequence is a \emph{split exact sequence}, and we say the sequence \emph{splits}.
\end{lemma}
\begin{proof}[Proof of Lemma $\ref{lem:splitting}$]
  $i) \Rightarrow ii)$, $i) \Rightarrow iii)$ is trivial by pulling back $m \mapsto (m,0)$ and $(m,n) \mapsto n$ through the isomorphism $M \cong L \oplus N$.
  \par $ii) \Rightarrow i)$. We claim $M \cong \alpha(L) \oplus s(N)$. Any $m \in M$ has the form $m = (m - s(\beta(m))) + s(\beta(m))$, where the second term is clearly in $s(N)$, and the first is in $\ker\beta$ since $\beta \circ s = \id_N$, and $\ker\beta = \alpha(L)$ by exactness. Moreover, $\alpha(L) \cap s(N) = 0$, since if $n \in N$ is such that $s(n) \in \alpha(L) = \ker\beta$ then $n = \beta(s(n)) = 0$. Finally, since $\alpha$ is injective by assumption and $s$ is injective since it has a left inverse, $\alpha(L) \cong L$ and $s(N) \cong N$, so $M \cong L \oplus N$.
  \par $iii) \Rightarrow i)$. We claim $M = \ker(r) \oplus \alpha(L)$. Any $m \in M$ has the form $M = (m - \alpha(r(m))) + \alpha(r(m))$, where the first term is clearly in $\alpha(L)$, and the second is in $\ker(r)$ since $r \circ \alpha = \id_L$. Moreover, $\ker(r) \cap \alpha(L) = 0$, since if $\ell \in L$ is such that $\alpha(\ell) \in \ker(r)$ then $\ell = r(\alpha(\ell)) = 0$. We now claim $\ker(r) \cong N$. Since $\beta$ is surjective, any $n \in N$ has preimage $m = m' + \alpha(\ell) \in M$ for some $\ell \in L$, where $m' \in \ker(r)$, so $n = \beta(m) = \beta(m')$ since $\beta \circ \alpha = 0$. So, $\beta\colon \ker(r) \to N$ is surjective; it is injective since if $\beta(m) = 0$, then $m \in \alpha(L)$ by exactness, and $\ker(r) \cap \alpha(L) = 0$ from above. So, $\ker(r) \cong N$, and since $\alpha$ is injective by assumption, $\alpha(L) \cong L$ as well, so $M \cong L \oplus N$.
\end{proof}
\begin{proof}[Main Proof]
  We claim the sequence $0 \to \ker\varphi \to M \overset{\varphi}{\to} A^n \to 0$ splits. Let $e_1,\ldots,e_n$ be a basis of $A^n$ and choose $u_i \in M$ such that $\varphi(u_i) = e_i$ ($1 \le i \le n$). This defines a spliting $s\colon A^n \to M$ by $e_i \mapsto u_i$, and so $M = \Ker(\varphi) \oplus \sum Au_i$ by the splitting lemma (Lemma \ref{lem:splitting}). So $\Ker(\varphi) \cong M/A^n$. If $A^m \twoheadrightarrow M$, then $A^m \twoheadrightarrow M \twoheadrightarrow M/A^n = \Ker(\varphi)$ implies $\Ker(\varphi)$ is finitely generated by Prop.~2.3.
\end{proof}

\begin{problem}
  Let $f\colon A \to B$ be a ring homomorphism, and let $N$ be a $B$-module. Regarding $N$ as an $A$-module by restriction of scalars, form the $B$-module $N_B = B \otimes_A N$. Show that the homomorphism $g\colon N \to N_B$ which maps $y$ to $1 \otimes y$ is injective and that $g(N)$ is a direct summand of $N_B$.
\end{problem}
\begin{proof}
  Note that the action of $B$ on $N_B$ is given by $b' \cdot (b \otimes_A n) = (b'b) \otimes_A n$, and $A$ on $N$ by $a \cdot n = f(a) \cdot n$ by definition of restriction of scalars. Define the map $\bar{p}\colon B \times N \to N$ defined by $\bar{p}(b,y) = by$. $\bar{p}$ is $A$-bilinear since letting $c \in A$,
  \begin{align*}
    \bar{p}(b+c \cdot d,y) &= \bar{p}(b+f(c)d,y) = (b + f(c)d)y = by + f(c)dy\\
    &= \bar{p}(b,y) + f(c)\bar{p}(d,y) = \bar{p} + c \cdot \bar{p}(d,y),\\
    \bar{p}(b,c \cdot x+y) &= \bar{p}(b,f(c)x + y) = b(f(c)x+y) = bf(c)x + by\\
    &= f(c)\bar{p}(b,x) + \bar{p}{b,y} = c \cdot \bar{p}(b,x) + \bar{p}{b,y}.
  \end{align*}
  By the universal property of the tensor product (Prop.~2.12) we then get the unique homomorphism $p\colon N_B \to N, b\otimes_A y \mapsto by$.
  \par Now consider the sequence
  \begin{equation*}
    \begin{tikzcd}
      0 \rar & N \rar[rightharpoonup,yshift=0.25ex]{g} & \lar[rightharpoonup,yshift=-0.25ex]{p} N_B \rar & \Coker(g) \rar & 0
    \end{tikzcd}
  \end{equation*}
  Since $(p \circ g)(y) = p(1 \otimes_A y) = y$, we see that $p \circ g = \id_N$, and so $g$ is injective; this implies the sequence is short exact. By the splitting lemma (Lemma \ref{lem:splitting}), we then see that $N_B \cong g(N) \oplus \Coker(g)$ as desired.
\end{proof}

\begin{problem}\label{exc:2.14}
  A partially ordered set $I$ is said to be a \emph{directed} set if for each pair $i,j$ in $I$ there exists $k \in I$ such that $i\le k$ and $j \le k$.
  \par Let $A$ be a ring, let $I$ be a directed set and let $(M_i)_{i \in I}$ be a family of $A$-modules indexed by $I$. For each pair $i,j$ in $I$ such that $i \le j$, let $\mu_{ij}\colon M_i \to M_j$ be an $A$-homomorphism, and suppose that the following axioms are satisfied:
  \begin{enumnum}
    \item $\mu_{ii}$ is the identity mapping of $M_i$, for all $i \in I$;
    \item $\mu_{ik} = \mu_{jk} \circ \mu_{ij}$ whenever $i \le j \le k$.
  \end{enumnum}
  Then the modules $M_i$ and homomorphisms $\mu_{ij}$ are said to form a \emph{direct system} $\mathbf{M} = (M_{i},\mu_{ij})$ over the directed set $I$.
  \par We shall construct an $A$-module $M$ called the \emph{direct limit} of the direct system $\textbf{M}$. Let $C$ be the direct sum of the $M_i$, and identify each module $M_i$ with its canonical image in $C$. Let $D$ be the submodule of $C$ generated by all elements of the form $x_i - \mu_{ij}(x_i)$ where $i \le j$ and $x_i \in M_i$. Let $M = C/D$, let $\mu \colon C \to M$ be the projection and let $\mu_i$ be the restriction of $\mu$ to $M_i$.
  \par The module $M$, or more correctly the pair consisting of $M$ and the family of homomorphisms $\mu_i \colon M_i \to M$, is called the \emph{direct limit} of the direct system $\mathbf{M}$, and is written $\varinjlim M_i$. From the construction it is clear that $\mu_i = \mu_j \circ \mu_{ij}$ whenever $i \le j$.
\end{problem}
\begin{proof}
  $D$ is clearly a submodule since $\mu_{ij}$ is an $A$-module homomorphism; $\mu_i = \mu_j \circ \mu_{ij}$ follows since $x_i = \mu_{ij}(x_i)$ in $M$.
\end{proof}

\begin{problem}\label{exc:2.15}
  In the situation of Exercise \href{exc:2.14}{$14$}, show that every element of $M$ can be written in the form $\mu_i(x_i)$ for some $i \in I$ and some $x_i \in M_i$.
  \par Show also that if $\mu_i(x_i) = 0$ then there exists $j \ge i$ such that $\mu_{ij}(x_i) = 0$ in $M_j$.
\end{problem}
\begin{proof}
  Any element in $M$ is of the form $\sum_{i \in F} x_i + D$ for some finite subset $F \subset I$. Since $I$ is directed and $F$ is finite, there exists some $j \in I$ such that $i \le j$ for all $i \in F$. By definition of $D$, $\sum_{i \in F} x_i + D = \sum_{i \in F} \mu_{ij}(x_i) + D$. Each $\mu_{ij}(x_i) \in M_j$, hence we can write
  \begin{equation*}
    \sum_{i \in F} \mu_{ij}(x_i) + D = \mu_{j}\left( \sum_{i \in F} \mu_{ij}(x_i)\right).
  \end{equation*}
  \par Now suppose $\mu_i(x_i) = 0$. This implies $x_i \in D \subset C$, and so $x_i - x_i' + \mu_{ij}(x_i') = 0$ for some $x_i' \in M_i$ and $j \ge i$. Since this equality holds in $C$, which is a direct sum, we see that the coordinate in index $i$ must equal zero, and so $x_i = x_{i}'$. Then, $\mu_{ij}(x_i') = \mu_{ij}(x_i)$ is the index $j$ coodinate, which must also equal zero, hence $\mu_{ij}(x_i) = 0$.
\end{proof}

\begin{problem}\label{exc:2.16}
  Show that the direct limit is characterized (up to isomorphism) by the
  following property. Let $N$ be an $A$-module and for each $i \in I$ let
  $\alpha_i \colon M_i \to N$ be an $A$-module homomorphism such that $\alpha_i
  = \alpha_j \circ \mu_{ij}$ whenever $i \le j$. Then there exists a unique
  homomorphism $\alpha \colon M \to N$ such that $\alpha_i = \alpha \circ
  \mu_i$ for all $i \in I$.
\end{problem}
\begin{proof}
  By the universal property of the direct sum (Lemma \ref{up:dirsum}), we get a unique homomorphism $\bar{\alpha}$ fitting into the commutative diagram
  \begin{equation*}
    \begin{tikzcd}
      M_i \arrow{rr}{\mu_{ij}}\arrow{dr}{\iota_i}\arrow{ddr}[swap]{\alpha_i} & & M_j \arrow{dl}[swap]{\iota_j}\arrow{ddl}{\alpha_j}\\
      & \bigoplus_i M_i\arrow[dashed]{d}[description,yshift=3pt]{\bar{\alpha}}\\
      & N
    \end{tikzcd}
  \end{equation*}
  where $\iota_i$ are the canonical inclusions $M_i \to \bigoplus_i M_i$. By the commutativity of the diagram, $\bar{\alpha}(x_i) = \bar{\alpha}(\mu_{ij}(x_i))$, hence $\bar{\alpha}$ factors uniquely through $\bigoplus_i M_i/D = \varinjlim M_i$ where $D$ is as before, i.e., there exists unique $\alpha \colon \varinjlim M_i \to N$ such that $\bar{\alpha} = \alpha \circ \pi$, where $\pi \colon \bigoplus_i M_i \to \varinjlim M_i$ is the quotient map \cite[Thm.~$14.1.6(b)$]{Art11}. Defining $\mu_i = \pi \circ \iota_i$, we have that $\alpha_i = \alpha \circ \mu_i$ by the commutativity of the diagram
  \begin{equation*}
    \begin{tikzcd}
      M_i \rar[hookrightarrow]{j_i}\arrow{dr}[swap]{\mu_i}\arrow[bend left]{rr}{\alpha_i} & \bigoplus_i M_i \rar{\bar{\alpha}}\dar[twoheadrightarrow]{\pi} & N\\
      & \varinjlim M_i\arrow[dashed]{ur}[swap]{\alpha}
    \end{tikzcd}
  \end{equation*}
  for each $i$. The direct limit is characterized up to isomorphism by this property since if $M'$ also satisfied this property, then the universal property gives homomorphisms $M' \to \varinjlim M_i$ and $\varinjlim M_i \to M'$ such that their composition must be the identity (where we use the universal property again), hence they are isomorphic.
\end{proof}

\begin{problem}
  Let $(M_i)_{i \in I}$ be a family of submodules of an $A$-module, such that for each pair of indices $i,j$ in $I$ there exists $k \in I$ such that $M_i + M_j \subseteq M_k$. Define $i \le j$ to mean $M_i \subseteq M_j$ and let $\mu_{ij} \colon M_i \to M_j$ be the embedding of $M_i$ in $M_j$. Show that
  \begin{equation*}
    \lim_{\longrightarrow} M_i = \sum M_i = \bigcup M_i.
  \end{equation*}
  In particular, any $A$-module is the direct limit of its finitely generated submodules.
\end{problem}
\begin{proof}
  For the second equality, we first see that trivially $\bigcup M_i \subset
  \sum M_i$, and so it suffices to show the other inclusion.
  But this follows since
  $m_{i_1} + \cdots + m_{i_n} \in M_{i_1} + \cdots + M_{i_n} \subset
  M_j \subset \bigcup M_i$, where $j$ is chosen such that $i_1,\ldots,i_n \le
  j$.

  \par To show $\displaystyle\lim_{\longrightarrow} M_i = \bigcup M_i$, it
  suffices to show that $\bigcup M_i$ satisfies the universal property for the
  direct limit in Exercise \ref{exc:2.16}.
  Let $N$ be an $A$-module and $\alpha_i\colon M_i \to N$ an $A$-module
  homomorphism such that $\alpha_i = \alpha_j \circ \mu_{ij}$ when $i \le j$.
  Then, defining $\alpha\colon \bigcup M_i \to N$ such that for $m \in \bigcup
  M$, we choose $i$ such that $m \in M_i$, and then let $\alpha(m) =
  \alpha_i(m)$.
  If $m \in M_i \cap M_j$, then we can choose $k \ge i,j$
  by hypothesis, and so $\alpha_k(m) = \alpha_i(m) = \alpha_j(m)$ since the
  $\mu_{ij}$'s are canonical embeddings.
  $\alpha$ is therefore well-defined, and is an $A$-module homomorphism such
  that $\alpha_i = \alpha \circ \mu_i$ for all $i \in I$.
  Moreover, since this is uniquely determined by the $\alpha_i$, we see that
  $\bigcup M_i$ satisfies the universal property, and so
  $\displaystyle\lim_{\longrightarrow} M_i \cong \bigcup M_i$.
  
  \par Now suppose $M$ is an $A$-module.
  If $\mathscr{F}$ is the family of finitely-generated submodules of $A$,
  we can define the direct limit of them since $M_1,M_2$ finitely generated
  implies $M_1 + M_2$ is finitely generated, and so $M_1 + M_2 \in \mathscr{F}$.
  Clearly $\displaystyle\lim_{\longrightarrow} \mathscr{F} \subset M$; we
  now show the reverse inclusion.
  So suppose $x \in M$.
  Then, $Ax \in \mathscr{F}$ since it is generated by $x$, and so
  $x \in \bigcup \mathscr{F}$.
  By the paragraph above, this shows
  $x \in \displaystyle\lim_{\longrightarrow} \mathscr{F}$.
\end{proof}

\begin{problem}
  Let $\mathbf{M} = (M_i,\mu_{ij})$, $\mathbf{N} = (N_i,\nu_{ij})$ be direct
  systems of $A$-modules over the same directed set.
  Let $M$, $N$ be the direct limits and $\mu_i \colon M_i \to M$, $\nu_i \colon
  N_i \to N$ the associated homomorphisms.
  \par A \emph{homomorphism} $\Phi \colon \mathbf{M} \to \mathbf{N}$ is by
  definition a family of $A$-module homomorphisms $\varphi_i \colon M_i \to
  N_i$ such that $\varphi_j \circ \mu_{ij} = \nu_{ij} \circ \varphi_i$ whenever
  $i \le j$. Show that $\Phi$ defines a unique homomorphism
  $\varphi = \varinjlim\varphi_i\colon M \to N$ such that $\varphi \circ
  \mu_i = \nu_i \circ \varphi_i$ for all $i \in I$.
\end{problem}
\begin{proof}
  Define $\alpha_i \colon M_i \to N$ by $\alpha_i = \nu_i \circ \varphi_i$.
  Note that
  \begin{equation*}
    \alpha_j \circ \mu_{ij} = \nu_j \circ \varphi_j \circ \mu_{ij}
    = \nu_j \circ \nu_{ij} \circ \varphi_i = \nu_i \circ \varphi_i = \alpha_i.
  \end{equation*}
  By the universal property of the direct limit (Exercise \ref{exc:2.16}),
  this induces a unique homomorphism $\varphi = \varinjlim \varphi_i \colon
  M \to N$ such that $\varphi \circ \mu_i = \alpha_i = \nu_i \circ \varphi_i$
  for all $i \in I$.
\end{proof}

\begin{problem}
  A sequence of direct systems and homomorphisms
  \begin{equation*}
    \mathbf{M} \to \mathbf{N} \to \mathbf{P}
  \end{equation*}
  is \emph{exact} if the corresponding sequence of modules and module
  homomorphisms is exact for each $i \in I$.
  Show that the sequence $M \to N \to P$ of direct limits is then exact. %[Use Exercise 15.]
\end{problem}
\begin{proof}
  For all $i \le j$, we have the commutative diagram
  \begin{equation*}
    \begin{tikzcd}
      M_i \rar{\varphi_i}\dar{\mu_{ij}} & N_i \rar{\psi_i}\dar{\nu_{ij}} & P_i\dar{\xi_{ij}}\\
      M_j \rar{\varphi_j}\dar{\mu_{j}} & N_j \rar{\psi_j}\dar{\nu_{j}} & P_j\dar{\xi_{j}}\\
      M \rar{\varphi} & N \rar{\psi} & P
    \end{tikzcd}
  \end{equation*}
  with exact rows.
  So suppose $m \in M$; it can be written as $\mu_j(m_j)$ for some $m_j \in M_j$
  by Exercise \ref{exc:2.15}.
  Then,
  \begin{equation*}
    \psi(\varphi(m)) = \psi(\varphi(\mu_j(m_j))) = \psi(\nu_j(\varphi_j(m_j))) =
    \xi_j(\psi_j(\varphi_j(m_j))) = 0
  \end{equation*}
  by the commutativity of the diagram, hence $\Im \varphi \subset \Ker \psi$.
  \par Conversely, suppose $n \in \Ker\psi$, i.e., $\psi(n) = 0$.
  By Exercise \ref{exc:2.15}, write $n = \nu_i(n_i)$ for some $n_i \in N_i$.
  Then, $\psi(\nu_i(n_i)) = \xi_i(\psi_i(n_i)) = 0$.
  By the second part of Exercise \ref{exc:2.15}, there exists $j \ge i$ such
  that $\xi_{ij}(\psi_i(n_i)) = 0$ in $P_j$, hence by the commutativity of the
  diagram, $\psi_j(\nu_{ij}(n_i)) = 0$.
  By exactness of the row $M_j \to N_j \to P_j$, this implies there exists $m_j
  \in M_j$ such that $\varphi_j(m_j) = \nu_{ij}(n_i)$.
  So, we have
  \begin{equation*}
    \nu_i(n_i) = \nu_j(\nu_{ij}(n_i)) = \nu_j(\varphi_j(m_j)) =
    \varphi(\mu_j(m_j))
  \end{equation*}
  by the commutativity of the diagram, hence $\Ker\psi \subset \Im \varphi$,
  and the bottom sequence $M \to N \to P$ is exact.
\end{proof}

\begin{problem}[AM Exercise 2.20]\label{exc:2.20}
  Keeping the same notation as in Exercise $14$, let $N$ be any $N$-module. Then $(M_i \otimes N, \mu_{ij} \otimes 1)$ is a direct system; let $P = \displaystyle\lim_{\longrightarrow}(M_i \otimes N)$ be its direct limit. For each $i \in I$ we have a homomorphism $\mu_i \otimes 1 : M_i \otimes N \to M \otimes N$, hence by Exercise $16$ a homomorphism $\psi : P \to M \otimes N$. Show that $\psi$ is an isomorphism, so that
  \begin{equation*}
    \lim_{\longrightarrow} (M_i \otimes N) \simeq \left( \lim_{\longrightarrow} M_i \right) \otimes N.
  \end{equation*}
\end{problem}
\begin{proof}
  For each $i \in I$, let $g_i : M_i \times N \to M_i \otimes N$ be the canonical bilinear mapping. Since $g_i = g_j \circ \mu_{ij}$ for $i \le j$, by the universal property of direct limits in AM Exercise $2.16$ we then have the unique homomorphism $g : M \times N \to P$. This is bilinear, since for $am+b \in M$, it is contained in some $M_i$, and so $g(am+b,n) = g_i(am+b,n) = ag_i(m,n) + g_i(b,n)$ by the bilinearity of $g_i$; the $N$ case follows similarly. Thus, by the universal property of tensor products we have the unique homomorphism $\varphi : M \otimes N \to P$.
  \par We claim $\varphi \circ \psi = \psi \circ \varphi = 1$. Let $x \in P$; then, by AM Exercise $2.17$ it is contained in some $M_i \otimes N$, and is of the form $(m_i \otimes n)$. Thus, $(\varphi \circ \psi)(x) = (\varphi \circ \psi)(m_i \otimes n) = \varphi(m_i \otimes n) = m_i \otimes n \in P$. Likewise, $x \in M \otimes N \implies x \in \bigcup M_i \otimes N \implies x = m_i \otimes n = x$ for some $m_i \in M_i$ for some $i$, and so $(\psi \circ \varphi)(x) = (\psi \circ \varphi)(m_i \otimes n) = m_i \otimes n = x$.
\end{proof}

\begin{problem}[AM Exercise 2.21]
  Let $(A_i)_{i \in I}$ be a family of rings indexed by a directed set $I$, and for each pair $i \le j$ in $I$ let $\alpha_{ij} : A_i \to A_j$ be a ring homomorphism, satisfying the conditions $(1)$ and $(2)$ of Exercise $14$. Regarding each $A_i$ as a $\mathbb{Z}$-module we can then form the direct limit $A = \displaystyle\lim_{\longrightarrow} A_i$. Show that $A$ inherits a ring structure form the $A_i$ so that the mappings $A_i \to A$ are ring homomorphisms. The ring $A$ is the \emph{direct limit} of the system $(A_i,\alpha_{ij})$.
  \par If $A=0$ prove that $A_i = 0$ for some $i \in I$.
\end{problem}
\begin{proof}
  Letting $\alpha_i : A_i \hookrightarrow A$ be the canonical ring homomorphic embedding that exists by considering $A = \bigcup A_i$ from AM Exercise $2.17$, we have that if $\xi,\eta \in A$, there exists $i,j$ such that $\xi = \alpha_i(x), \eta = \alpha_j(y)$ for $x \in A_i, y \in A_j$ from AM Exercise $2.15$. Choosing $k \geqslant i,j$ we have $\xi = \alpha_k(\alpha_{ik}(x)), \eta = \alpha_k(\alpha_{jk}(y))$; define $\xi\cdot\eta = \alpha_k(\alpha_{ik}(x)\alpha_{jk}(y))$. Since the $\alpha$'s are already ring homomorphisms, we only have to show this product is well-defined.
  \par So, suppose $\ell \geqslant i,j$ and $m \geqslant \ell,k$. Then,
  \begin{align*}
    \alpha_k(\alpha_{ik}(x)\alpha_{jk}(y)) &= \alpha_m(\alpha_{km}(\alpha_{ik}(x)\alpha_{jk}(y)))\\
    &= \alpha_m(\alpha_{km}(\alpha_{ik}(x))\alpha_{km}(\alpha_{jk}(y)))\\
    &= \alpha_m(\alpha_{im}(x)\alpha_{jm}(y))\\
    &= \alpha_m(\alpha_{\ell m}(\alpha_{i\ell}(x))\alpha_{\ell m}(\alpha_{j\ell}(y)))\\
    &= \alpha_m(\alpha_{\ell m}(\alpha_{i\ell}(x)\alpha_{j\ell}(y)))\\
    &= \alpha_\ell(\alpha_{i\ell}(x)\alpha_{j\ell}(y)),
  \end{align*}
  and so the product is independent of $k$.
  \par Moreover, we would like to show this is independent of our choice of $x,y$. This follows since if we had other $x' \in A_{i'}, y' \in A_{j'}$ and choose $k \geqslant i,j,i',j'$, we would have
  \begin{multline*}
    \alpha_{k}(\alpha_{ik}(x) - \alpha_{i'k}(x')) = 0 \land \alpha_{k}(\alpha_{jk}(y) - \alpha_{j'k}(y')) = 0\\
    \implies  \alpha_{k\ell}(\alpha_{ik}(x) - \alpha_{i'k}(x')) = 0 \land \alpha_{k\ell}(\alpha_{jk}(y) - \alpha_{j'k}(y')) = 0
  \end{multline*}
  for some $\ell \geqslant k$ by AM Exercise $2.15$. But this is equivalent to
  \begin{equation*}
    \alpha_{i\ell}(x) = \alpha_{i'\ell}(x') \land \alpha_{j\ell}(y) = \alpha_{j'\ell}(y'),
  \end{equation*}
  and so
  \begin{equation*}
    \alpha_{\ell}(\alpha_{i\ell}(x)\alpha_{j\ell}(y)) = \alpha_{\ell}(\alpha_{i'\ell}(x)\alpha_{j'\ell}(y)),
  \end{equation*}
  and so the product is independent from choice of $x,y$.
  \par Now suppose $A=0$; this implies $1_A = 0$. Then, there must exist $i \in I$ such that $0 = 1_A = \alpha_i(1_{A_i})$ since ring homomorphisms are unital; there then exists $j \geqslant i$ such that $\alpha_{ij}(1_{A_i}) = 0$ by AM Exercise $2.15$. But then, $\alpha_{ij}(1_{A_i}) = 0 = 1_{A_j}$ since ring homomorphisms are unital; thus, $A_j = 0$.
\end{proof}

\begin{problem}[AM Exercise 2.22]
  Let $(A_i,\alpha_{ij})$ be a direct system of rings and let $\mathfrak{N}_i$ be the nilradical of $A_i$. Show that $\displaystyle\lim_{\longrightarrow} \mathfrak{N}_i$ is the nilradical of $\displaystyle\lim_{\longrightarrow} A_i$.
  \par If each $A_i$ is an integral domain, then $\displaystyle\lim_{\longrightarrow} A_i$ is an integral domain.
\end{problem}
\begin{proof}
  Suppose $x \in \mathfrak{N}$, the nilradical of $A = \displaystyle\lim_{\longrightarrow} A_i$. Then, $x = \alpha_i(x_i)$ for some $x_i \in A_i$ by AM Exercise $2.15$. Since these $\alpha_i$ are ring homomorphisms by AM Exercise $2.21$, $\alpha_i(x_i^n) = 0$ for some $n$, and so by AM Exercise $2.15$ there exists $j$ such that $\alpha_{ij}(x_i^n) = \alpha_{ij}(x_i)^n = 0$, i.e., $\alpha_{ij}(x_i) \in \mathfrak{N}_j$. Then, $x = \alpha_j(\alpha_{ij}(x_i)) \in \alpha_j(\mathfrak{N}_j) \subseteq \displaystyle\lim_{\longrightarrow} \mathfrak{N}_i$.
  \par In the other direction, suppose $x \in \displaystyle\lim_{\longrightarrow} \mathfrak{N}_i$; we can again write $x = \alpha_i(x_i)$ for $x_i \in \mathfrak{N}_i$. Then, $x_i^n = 0$ for some $n \implies x^n = 0 \implies x \in \mathfrak{N}$. Thus, $\mathfrak{N} = \displaystyle\lim_{\longrightarrow} \mathfrak{N}_i$.
  \par Suppose $xy = 0 \in A$, and pick $i,j$ such that $x = \alpha_i(x_i), y = \alpha_j(y_j)$; by the well-definition of the ring structure on $A$, if we assume without loss of generality that $i \geqslant j$, we can find $y_i = \alpha_{ij}(y_j)$ such that we have $xy = \alpha_i(x_i)\alpha_j(y_j) = \alpha_i(x_i)\alpha_i(y_i) = \alpha_i(x_iy_i) = 0$. By AM Exercise $2.15$, we can then find $k \geqslant i$ such that $\alpha_{ik}(x_iy_i) = \alpha_{ik}(x_i)\alpha_{ik}(y_i) = 0$. But since $A_k$ is an integral domain, we have that $\alpha_{ik}(x_i) = 0 \lor \alpha_{ik}(y_i) = 0$. Note that if we assume without loss of generality the former is true, $\alpha_k(\alpha_{ik})(x_i) = x = 0$.
\end{proof}

\printbibliography
\end{document}
